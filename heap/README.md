## 堆的表示与性质

(二叉)堆是一个数组，它可以对应为一个近似的完全二叉树(最多在两层上具有叶节点，其中底层的叶节点尽可能的靠左分布)。

表示堆的数组 `A` 有两个属性，`length` 给出数组可以容纳元素的个数，`heap_size` 表示实际有多少元素存在堆中。

当用下标从 `1` 开始的数组表示堆时：

    left_child(i) = 2 * i

    right_chile(i) = 2 * i + 1

    parent(i) = ⌊i / 2⌋

二叉堆可以分为两种形式：

1. 最大堆：除根节点外的所有结点 `i` 都要满足 `A[parent(i)] ≥ A[i]`
2. 最小堆：除根节点外的所有结点 `i` 都要满足 `A[parent(i)] ≤ A[i]`

*定义一个堆中的结点的高度为该结点到叶结点最长简单路径上边的数目*

*把堆的高度定义为根结点的高度*

对于一个有 `n` 个结点的堆:

* 高度不超过 `lgn`
* 子数组 `A[n/2+1, ···, n]` 中的元素都是树的树叶

## 堆的基本操作

*数组 `A` 为 `h->base`*

`max_heapify` 的输入为一个堆 `h` 和一个下标 `i`，它假定根结点为 `LEFT(i)` 和 `RIGHT(i)` 的二叉堆都是最大堆，但这时 `h->base[i]` 有可能小于其孩子，`max_heapify` 通过让 `h->base[i]` 的值在最大堆中“逐级下降”，从而使的以下标 `i` 为根结点的子树重新遵循最大堆的性质。时间复杂度 `T(n) = O(lgn)`。

`build_max_heap` 自底向上的把一个 `h->heap_size == 0` 的堆建立为 `h->heap_size == h->length` 的最大堆。子数组 `A[⌊n/2⌋+1..n]` 中的元素都是树的叶结点，每个叶结点都可以看成只包含一个元素的堆，过程 `build_max_heap` 对树中的其他结点都调用一次 `max_heapify`。时间复杂度 `T(n)` 估计为 `O(nlgn)`，更准确的值为 `O(n)`。

`min_heapify`与`build_min_heap`同理。

